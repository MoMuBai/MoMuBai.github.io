<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-/Android反编译/" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/07/Android反编译/" class="article-date">
  <time datetime="2018-03-07T12:50:02.591Z" itemprop="datePublished">2018-03-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/07/Android反编译/">Android反编译</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/03/07/Android反编译/" data-id="cjtwrr625000i5f6sgrchabgb" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-/Android屏幕适配/" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/07/Android屏幕适配/" class="article-date">
  <time datetime="2018-03-07T12:50:02.590Z" itemprop="datePublished">2018-03-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/07/Android屏幕适配/">Android屏幕适配</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>实际上很早就想写关于Android屏幕适配的总结了，但是由于各种各样的理由推迟了</p>
</blockquote>
<h4 id="什么是屏幕适配"><a href="#什么是屏幕适配" class="headerlink" title="什么是屏幕适配"></a>什么是屏幕适配</h4><p>屏幕适配即在不同分辨率、尺寸、比例的设备上显示达到一样的效果</p>
<h4 id="为什么要屏幕适配"><a href="#为什么要屏幕适配" class="headerlink" title="为什么要屏幕适配"></a>为什么要屏幕适配</h4><p>由于Android系统的开放性，任何用户、开发者、OEM厂商、运营商都可以对Android进行定制，修改成他们想要的样子，这种情况下导致了Android系统的碎片化严重</p>
<blockquote>
<p>碎片化：系统碎片化(小米MIUI、华为EMUI、魅族flyme)、屏幕大小碎片化(5.0、5.5、6.0)、屏幕分辨率碎片化(320x480、480x800、720x1280、1080x1920)</p>
<p>这里有Android碎片化的数据：<a href="https://opensignal.com/reports/2014/android-fragmentation/" target="_blank" rel="noopener">戳这里</a></p>
</blockquote>
<h4 id="如何进行屏幕适配"><a href="#如何进行屏幕适配" class="headerlink" title="如何进行屏幕适配"></a>如何进行屏幕适配</h4><h5 id="在屏幕适配开始前，我们需要对Android的一些屏幕相关单位有所了解"><a href="#在屏幕适配开始前，我们需要对Android的一些屏幕相关单位有所了解" class="headerlink" title="在屏幕适配开始前，我们需要对Android的一些屏幕相关单位有所了解"></a>在屏幕适配开始前，我们需要对Android的一些屏幕相关单位有所了解</h5><ul>
<li>像素：单位px，屏幕上的点，我们看到的图像都是由一个个小点构成的</li>
<li>屏幕尺寸：屏幕上对角线的长度，单位是英寸，一英寸为2.54厘米，现在市场上常见的有4.7、5.0、5.5、6.0等尺寸的手机</li>
<li>屏幕分辨率：横纵方向上的像素点数，如1920*1080，即纵向上有1920个像素点，横向上有1080个像素点</li>
<li>屏幕每英寸点数：单位dpi，为屏幕分辨率/屏幕尺寸所得的值，如一个1920*1080的手机，它的纵向尺寸为3英寸，横向尺寸为5.3英寸，那么它的像素密度为1080/3=360dpi，屏幕分辨率越高，尺寸越小，那么它的像素密度就越高</li>
<li>屏幕像素密度：density = dpi/160</li>
<li>屏幕像素无关密度：单位dp或者是dip，与物流像素点无关，是Android特有的单位，是为了保证在不同屏幕像素密度的设备上显示相同的效果</li>
<li>屏幕独立比例像素：单位sp，类似dp，一般是用来设置文字大小</li>
</ul>
<p>这里用张表格来各个单位之间的关系</p>
<table>
<thead>
<tr>
<th>密度类型</th>
<th style="text-align:center">代表的分辨率（px）</th>
<th style="text-align:right">屏幕每英寸点数（dpi）</th>
<th style="text-align:right">屏幕密度（density）</th>
<th style="text-align:right">换算（px/dp）</th>
<th style="text-align:right">比例</th>
</tr>
</thead>
<tbody>
<tr>
<td>低密度（ldpi）</td>
<td style="text-align:center">240x320</td>
<td style="text-align:right">120</td>
<td style="text-align:right">0.75</td>
<td style="text-align:right">1dp = 0.75px</td>
<td style="text-align:right">3</td>
</tr>
<tr>
<td>中密度（mdpi）</td>
<td style="text-align:center">320x480</td>
<td style="text-align:right">160</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1dp = 1px</td>
<td style="text-align:right">4</td>
</tr>
<tr>
<td>高密度（hdpi）</td>
<td style="text-align:center">480x800</td>
<td style="text-align:right">240</td>
<td style="text-align:right">1.5</td>
<td style="text-align:right">1px = 1.5dp</td>
<td style="text-align:right">6</td>
</tr>
<tr>
<td>超高密度（xhdpi）</td>
<td style="text-align:center">720x1280</td>
<td style="text-align:right">320</td>
<td style="text-align:right">2</td>
<td style="text-align:right">1dp = 2px</td>
<td style="text-align:right">8</td>
</tr>
<tr>
<td>超超高密度（xxhdpi）</td>
<td style="text-align:center">1080x1920</td>
<td style="text-align:right">480</td>
<td style="text-align:right">3</td>
<td style="text-align:right">1dp = 3px</td>
<td style="text-align:right">12</td>
</tr>
</tbody>
</table>
<h5 id="如何适配"><a href="#如何适配" class="headerlink" title="如何适配"></a>如何适配</h5><hr>
<p>参考链接</p>
<p><a href="https://www.jianshu.com/p/ec5a1a30694b" target="_blank" rel="noopener">Android 屏幕适配：最全面的解决方案</a></p>
<p><a href="http://blog.csdn.net/zhaokaiqiang1992/article/details/45419023#%E5%B1%8F%E5%B9%95%E5%B0%BA%E5%AF%B8" target="_blank" rel="noopener">Android屏幕适配全攻略(最权威的官方适配指导)</a></p>
<p><a href="http://stormzhang.com/android/2014/05/16/android-screen-adaptation/" target="_blank" rel="noopener">Android 屏幕适配</a></p>
<p><a href="http://blog.csdn.net/guolin_blog/article/details/8830286" target="_blank" rel="noopener">Android官方提供的支持不同屏幕大小的全部方法</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/03/07/Android屏幕适配/" data-id="cjtwrr61y000h5f6sfrtf4k5u" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-/阿里云大使行走中/" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/07/阿里云大使行走中/" class="article-date">
  <time datetime="2018-03-07T12:50:02.589Z" itemprop="datePublished">2018-03-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/07/阿里云大使行走中/">阿里云大使行走中</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>💰💰💰💰💰💰💰💰💰💰💰💰💰💰💰💰💰💰💰💰💰💰💰</p>
<p><strong>满满的$$$镇楼</strong></p>
<blockquote>
<p>在使用阿里云提供的域名服务中偶然发现云大使这个组织，然后发现这是个让其他的人通过使用你的幸运券去购买阿里云产品，你就可以获得对应的返佣比例，最高可达30%(如被推荐的人新购买或者是升级了自己的域名服务。支付了10000元，则云大使就可以获得3000元的返佣)</p>
</blockquote>
<p>说的简单点，云大使就是<strong>分享幸运券-&gt;坐等返佣</strong>的过程，通俗点就是个<strong>赚钱，钱，钱</strong>的过程，重要的话要说三遍</p>
<blockquote>
<p>当然是要有人使用了你分享的幸运券的前提下</p>
</blockquote>
<p>我们现在就来说说如何用云大使实现我们的目标：<strong>月入百万、荣登CEO、迎娶白富美</strong>我的<strong><a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=2j1udai5&amp;utm_source=2j1udai5" target="_blank" rel="noopener">幸运券</a></strong></p>
<h5 id="1-加入云大使"><a href="#1-加入云大使" class="headerlink" title="1.加入云大使"></a>1.加入云大使</h5><p>首先需要你有<a href="https://www.aliyun.com/?utm_medium=text&amp;utm_source=bdbrand&amp;utm_campaign=bdbrand&amp;utm_content=se_32492" target="_blank" rel="noopener">阿里云</a>的账号，然后你就可以通过<a href="https://promotion.aliyun.com/ntms/yunparter/zhaomu.html?spm=5176.bbsr569878.0.0.ZUuEom" target="_blank" rel="noopener">云大使报名入口</a>加入云大使</p>
<h5 id="2-分享使用幸运券及好处"><a href="#2-分享使用幸运券及好处" class="headerlink" title="2.分享使用幸运券及好处"></a>2.分享使用幸运券及好处</h5><ul>
<li><p>网页端：加入云大使后会对应的<strong><a href="https://expense.console.aliyun.com/#/ambassador/ticket/product" target="_blank" rel="noopener">生成你的幸运券</a></strong>，然后你可以通过复制<strong><a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=2j1udai5&amp;utm_source=2j1udai5" target="_blank" rel="noopener">你的幸运券</a></strong>分享出去</p>
</li>
<li><p>App端：<strong>阿里云App-&gt;我的-&gt;推开奖励-&gt;分享全部产品幸运券</strong>然后就可以通过其他方式分享到支付宝、钉钉、微信、QQ等</p>
</li>
</ul>
<h5 id="3-使用幸运券"><a href="#3-使用幸运券" class="headerlink" title="3.使用幸运券"></a>3.使用幸运券</h5><ul>
<li><p>如何使用幸运券：其他人在选择<strong>阿里云产品-&gt;购买-&gt;确认订单的环节-&gt;使用云大使的幸运券-&gt;提交订单-&gt;完成支付</strong>，整个流程后即可认为幸运券被使用</p>
</li>
<li><p>使用幸运券的好处：</p>
<ul>
<li>幸运券实际上是有优惠的，只是它的优惠金额是随机的</li>
<li>订单支付大于0元可参与抽奖</li>
<li>首购ecs大于1000元可参与抽奖</li>
</ul>
</li>
</ul>
<blockquote>
<p>当前阿里云可以使用幸运券的产品共29款</p>
</blockquote>
<h5 id="4-坐等返佣"><a href="#4-坐等返佣" class="headerlink" title="4.坐等返佣"></a>4.坐等返佣</h5><p>18年1月返利新规<strong>【返佣率高达30%无封顶返利】</strong></p>
<p><img src="http://p0sgkjh7x.bkt.clouddn.com/47499416-AC74-4B5C-A057-CFB5E0D3F738.png" alt="1月份新规图"></p>
<ul>
<li><p>返利时间：一般情况下当月的奖励将会在下下月的20号左右返利，如1月月份推荐的返利将在18年3月20日左右发放，（一般情况下只会提前不会延后）返利将会发放到绑定的支付宝账号中</p>
</li>
<li><p>需要注意:要完成<strong>1实名认证-&gt;2.绑定支付宝-&gt;3.现金购云产品&gt;=100元(第3条在校学生通过学生认证除外)</strong>才能够完成返利提现</p>
</li>
</ul>
<hr>
<blockquote>
<p>附上阿里云可以使用幸运券产品图(18年1月份新图)，总有一款适合你，</p>
</blockquote>
<p><img src="http://p0sgkjh7x.bkt.clouddn.com/8406A892-DDBD-4345-83C8-24A9AE3D26A7.png" alt="图1"><br><img src="http://p0sgkjh7x.bkt.clouddn.com/32693FE6-4454-4440-B48B-BAEB2A81FCA4.png" alt="图2"><br><img src="http://p0sgkjh7x.bkt.clouddn.com/D7D61595-2640-4918-B4AC-1FB3A86C485C.png" alt="图3"></p>
<p>可以根据自己的需要选择云产品，使用我的<strong><a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=2j1udai5&amp;utm_source=2j1udai5" target="_blank" rel="noopener">幸运券</a></strong>来实现你的幸运产品</p>
<p>参考链接</p>
<p><a href="https://bbs.aliyun.com/read/325184.html?spm=5176.2020520127.100133.6.niQOZ8" target="_blank" rel="noopener">大神引路–新手云大使入门导引</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/03/07/阿里云大使行走中/" data-id="cjtwrr61s000g5f6saddfdmfp" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-/Me/" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/07/Me/" class="article-date">
  <time datetime="2018-03-07T12:50:02.589Z" itemprop="datePublished">2018-03-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/07/Me/">Me</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="个人简历"><a href="#个人简历" class="headerlink" title="个人简历"></a>个人简历</h3><ul>
<li><strong>姓名：</strong> 林志文</li>
<li><strong>花名：</strong> 沐白</li>
<li><strong>Email：</strong> <a href="mailto:quickly520@126.com" target="_blank" rel="noopener">quickly520@126.com</a></li>
</ul>
<h4 id="优势"><a href="#优势" class="headerlink" title="优势"></a>优势</h4><ul>
<li><p>​1.熟悉 android 体系结构，常用mvc+mvp+mvvm等的架构模式，模块化、组件化开发方式</p>
</li>
<li><p>2.http+https+socket协议，常用加密解密算法(数据安全性)，代码混淆(代码安全性)， 多线程+多进程，线程+进程间通信(管道、JNI、信号量等)</p>
</li>
<li><p>3.高性能+多并发的app开发(性能优化+内存优化+apk优化)</p>
</li>
<li><p>4.对敏捷开发+单元测试的开发模式有一定了解</p>
</li>
<li><p>5.多机型适配+多屏幕+多系统+多渠道的适配</p>
</li>
<li><p>6.android view绘制、touch事件机制等流程</p>
</li>
<li><p>7.热衷于熟悉业务流程再去开发</p>
</li>
<li><p>8.代码重构和良好的编码风格</p>
</li>
<li><p>9.kotlin开发、快应用、小程序、区块链应用的学习开发</p>
</li>
</ul>
<h4 id="工作经历"><a href="#工作经历" class="headerlink" title="工作经历"></a>工作经历</h4><ul>
<li><strong>杭州筑家易网络科技股份有限公司 2016.8-至今</strong></li>
</ul>
<blockquote>
<p> <strong>产品研发部</strong></p>
</blockquote>
<p>智能IOT项目，包括wifi设备，zigbee子设备，蓝牙设备的接入，对接接触了包括阿里云iot，鸿雁，顺舟，涂鸦，控家，云之屋等第三方接入平台和接入厂家。</p>
<p>其他几个app(筑家易、经纪通、中策通、楼掌柜)的版本更新迭代，提升 app 的产品性能 和代码的优化，房产数据的挖掘，用户体验的回馈总结，对产品理念的意见等</p>
<ul>
<li><strong>杭州一幅画网络科技有限公司 2016.4-2016.7</strong></li>
</ul>
<blockquote>
<p><strong>技术部</strong></p>
</blockquote>
<p>创业公司，以画为切入点提供多种艺术品的展览和销售，前期app主要是推翻原有的架构，功能需求重新设计和体现，迭代了多个版本，后续主要在于提升性能，用户体验理念等，同时带新人开发</p>
<ul>
<li><strong>北京美若瞳网络科技有限公司 2015.8-2016.3</strong></li>
</ul>
<blockquote>
<p>技术部</p>
</blockquote>
<p>项目小组组长，对接项目开发，调控整个开发进度，进度的管理，重要模块的开发，对接产品需求商榷，后台需求接口定义，app上线第一个版本以及后续的版本更新迭代</p>
<h4 id="项目经历"><a href="#项目经历" class="headerlink" title="项目经历"></a>项目经历</h4><ul>
<li>筑家智能</li>
</ul>
<blockquote>
<p>IOT项目的app开发，通过智能设备（wifi设备，zigbee子设备，蓝牙设备）构建整个智能家居、社区的生活方式，项目初期集成了阿里云iot、鸿雁的设备，萤石的猫眼摄像头，清华大学的动态舒适性算法等厂商厂家的一些单品设备的接入，中期服务端搭建自己的云平台接入以满足不同的厂商厂家的需求，包括顺舟，控家等厂家设备提供商，同时接入阿里飞燕平台，定制化、组件化开发app来满足不同三方的需求和业务！</p>
</blockquote>
<ul>
<li>筑家易</li>
</ul>
<p>项目以楼源信息，社区服务，家居家装为主要结构，后期接入云之屋智能iot云平台服务家居生活。项目主要是以 mvp+retrofit+rxjava 为框架，版本迭代为了解偶通过ARouter作为组件化的通信框架，提高了app 的复用性，提高了性能体验和开发速度！</p>
<blockquote>
<p>项目后期接入了智能家居模块</p>
</blockquote>
<ul>
<li>经纪通</li>
</ul>
<p>经纪人使用管理平台，主要是对经纪人楼盘销售，客户管理，佣金进度，数据记录等为主要功能，项目前期是以uil+mvc+asyncTask等较老的框架为基础的 app，后续迭代中由于不好维护，对整体架构进行升级更新，以较为流行通用的mvp结合mvvm，同时引入rxjava，对于链路的简洁和拓展有了很大的帮助</p>
<blockquote>
<p>项目后面更新较少，后来因为原代码混乱、耦合性太高，推到重做了一版</p>
</blockquote>
<ul>
<li>楼掌柜分销</li>
</ul>
<p>具有多个角色的楼盘销售管理平台，项目初期以java语言进行开发，后期开始使用kotlin来辅助开发</p>
<blockquote>
<p>项目原先是以Java为开发语言，后来接触了kotlin，因为更加的安全、简洁然后慢慢的被吸引</p>
</blockquote>
<ul>
<li>一幅画</li>
</ul>
<blockquote>
<p>结构为mvp+fresco+okhttp结合使用的项目，由于产品的迭代过与频繁，整个框架也需要跟着产品变化不断变化，同时由于没有专门的测试，引入简单的单元测试来减少bug</p>
</blockquote>
<ul>
<li>美若</li>
</ul>
<blockquote>
<p>以线上销售眼镜为主要业务的项目，项目通过 mvc+volley+uil+autoLayout 框架来搭建，接入了微信，支付宝第三方支付，支持切换第三方字体！同时加入了一些特殊的动画和效果</p>
</blockquote>
<h4 id="自我评价"><a href="#自我评价" class="headerlink" title="自我评价"></a>自我评价</h4><p>安卓开发，目前工作重点主要在 IoT 项目上，对接过阿里云 IoT、鸿雁、顺 舟、涂鸦、控家、云之屋等第三方平台和厂家，熟悉 wifi 设备、zjebee 设 备、网关、socket 等之间的通信协议，熟悉安卓体系结构、常用的架构模式， 目前在着力于 kotlin 开发，快应用、小程序和区块链学习，喜欢跑步，参加过 马拉松!</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/03/07/Me/" data-id="cjtwrr633000w5f6ssqkvhaaq" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-/浅谈安卓项目中的从MVC到MVP在到MVVM架构模式/" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/07/浅谈安卓项目中的从MVC到MVP在到MVVM架构模式/" class="article-date">
  <time datetime="2018-03-07T12:50:02.588Z" itemprop="datePublished">2018-03-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/07/浅谈安卓项目中的从MVC到MVP在到MVVM架构模式/">浅谈安卓项目中的从MVC到MVP在到MVVM架构模式</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h5><blockquote>
<p>MVC(模型Model-视图View-控制器Controller)的缩写，是一种软件的设计典范。主要是用来将业务逻辑和数据以及界面进行分离的架构方式。MVC最早是用来桌面程序上的，已经发展了几十年了，可以说得上是最经典的框架模式。</p>
</blockquote>
<p>实际上MVC没有一个具体标准的说法，每个人都有着不同的理解！具体可以看下<a href>混乱的MVC架构</a></p>
<ul>
<li>View：对应布局文件.xml</li>
<li>Model：业务逻辑和实体模型</li>
<li>Controller：对应于Activity</li>
</ul>
<p>View可以与Model直觉交互<br>Controller是基于行为的，并且可以被多个View共享，可以负责决定显示哪个View</p>
<h5 id="MVP"><a href="#MVP" class="headerlink" title="MVP"></a>MVP</h5><blockquote>
<p>MVP(模型Model-视图View-主持者Presenter)是MVC的进一步改进，原来的MVC的三层结构之间的联系性较高，对View和Model层来说分离的不够彻底。MVP中的P层则是完全起到连接V-M的作用，M和V层之间没有相互操作的关系。</p>
</blockquote>
<p>在项目中，mvp是需要我们自己去封装</p>
<h5 id="MVVM"><a href="#MVVM" class="headerlink" title="MVVM"></a>MVVM</h5><blockquote>
<p>MVVM(模型Model-视图View-视图模型ViewModel)</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/03/07/浅谈安卓项目中的从MVC到MVP在到MVVM架构模式/" data-id="cjtwrr61s000f5f6s5e9e6tck" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-/混乱的MVC架构模式/" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/07/混乱的MVC架构模式/" class="article-date">
  <time datetime="2018-03-07T12:50:02.587Z" itemprop="datePublished">2018-03-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/07/混乱的MVC架构模式/">混乱的MVC架构模式相关</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>MVC(模型Model-视图View-控制器Controller，1982年)是一种软件设计的典范，它采用将业务逻辑、数据、界面进行分离的方式组织代码。但是它作为最基本的架构模式，至今已经发展了几十年，却没有一个明确的标准，每个人都有着自己的看法，对于它的实现方式也有着许多的不同。今天我们就来谈谈MVC是怎么混乱的。</p>
</blockquote>
<p><img src alt="MVC图片"></p>
<h5 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h5><ul>
<li>Model：模型，对应的在我们的项目中就是数据类(数据的存储、操作等)</li>
<li>View：视图，可以理解为用来显示数据的界面，对于用户来说是最直观能看到的东西(一般对应项目中的布局xml)</li>
<li>Controller：控制器，用来处理用户交互的部分，通常是从视图读取数据，控制用户的输入，想Model发送数据等等(具体可以去看我们的Activity，一般来说我们在项目中把Controoler对应我们Activity，它的作用我想大家都能够说出个一二三四来,我在这里就不多加内容)</li>
</ul>
<h5 id="关于混乱"><a href="#关于混乱" class="headerlink" title="关于混乱"></a>关于混乱</h5><p><strong>一千个读者就有一千个哈利波特，一千个乘客就有一千个老司机</strong></p>
<p>ASP.NET MVC</p>
<p>这是<a href="https://msdn.microsoft.com/en-us/library/dd381412(v=vs.108" target="_blank" rel="noopener">ASP.NET MVC</a>.aspx)中对于MVC的描述定义。</p>
<p><img src="https://i-msdn.sec.s-msft.com/dynimg/IC263184.png" alt="MVC示意图"></p>
<p>原谅我直接盗图…</p>
<p><em>ASP.NET</em> 对于这个示意图仅仅是通过几个箭头来表示之间的关系，但是我们可以从图片从得到我们所能看到的关系：</p>
<ul>
<li>1.Controller即控制器它负责对View和Model进行管理，它能直接操作到View和Model</li>
<li>2.View来显示Model的数据</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/03/07/混乱的MVC架构模式/" data-id="cjtwrr61r000e5f6setcbgs9s" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-/AttachInfo的初步了解和解析/" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/07/AttachInfo的初步了解和解析/" class="article-date">
  <time datetime="2018-03-07T12:50:02.586Z" itemprop="datePublished">2018-03-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/07/AttachInfo的初步了解和解析/">AttachInfo的初步了解和解析</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">View&#123;</span><br><span class="line">	 ...</span><br><span class="line"> 	 /**</span><br><span class="line"> 	  * A set of information given to a view when it is attached to its parent window.</span><br><span class="line"> 	  */</span><br><span class="line">     final static class AttachInfo &#123;</span><br><span class="line">    	interface Callbacks &#123;</span><br><span class="line">            void playSoundEffect(int effectId);</span><br><span class="line">            boolean performHapticFeedback(int effectId, boolean always);</span><br><span class="line">        &#125;</span><br><span class="line">         static class InvalidateInfo &#123;</span><br><span class="line">         	...</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        final IWindowSession mSession;</span><br><span class="line"></span><br><span class="line">        final IWindow mWindow;</span><br><span class="line"></span><br><span class="line">        final IBinder mWindowToken;</span><br><span class="line"></span><br><span class="line">        final Display mDisplay;</span><br><span class="line"></span><br><span class="line">        final Callbacks mRootCallbacks;</span><br><span class="line">			</span><br><span class="line">		 ...</span><br><span class="line"></span><br><span class="line">     &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>View</strong>的显示过程是需要依附在<strong>Window</strong>窗口上的，而<strong>View</strong>和<strong>Window</strong>的关系是通过<strong>AttachInfo</strong>来管理的，但是实际上这个类我们使用的很少，它是View的内部类而且不是公开的，我们一般只有在ViewRootImpl等类中使用到</p>
<blockquote>
<p>我们可以通过AttachInfo来获取当前View依附的是哪个Window窗口</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/03/07/AttachInfo的初步了解和解析/" data-id="cjtwrr61n000c5f6swsvdtbv3" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-/从项目需求到PopupWindow在到Window的过程浅析/" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/07/从项目需求到PopupWindow在到Window的过程浅析/" class="article-date">
  <time datetime="2018-03-07T12:50:02.585Z" itemprop="datePublished">2018-03-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/07/从项目需求到PopupWindow在到Window的过程浅析/">从项目需求到PopupWindow在到Window的过程浅析</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h4><blockquote>
<p>项目中有这么个需求，底部是5个Tab选项，中间那个是一个圆形的高位按钮选项，点击中间选项会从底部弹出个布局，并且这个布局的视觉效果是要在这个圆形选项的底部…这么说有点混乱，来张效果图看看</p>
</blockquote>
<p><img src="http://p0sgkjh7x.bkt.clouddn.com/3BD32333-AE0F-4F31-8D8A-596D12178F9B.png" height="220" width="150"><strong>点击场景后</strong><br><img src="http://p0sgkjh7x.bkt.clouddn.com/388EEDFA-1AFB-4DA1-9DDD-D605717110B0.png" height="220" width="150"></p>
<h4 id="实现过程"><a href="#实现过程" class="headerlink" title="实现过程"></a>实现过程</h4><blockquote>
<p>看到这2个设计图的时候第一想法是底部3个<strong>tab</strong>选项然后点击场景后弹出个<strong>PopupWindow</strong>，因为用过而且用的场景还挺多的。</p>
</blockquote>
<p>然后啪啦啪啦的一堆代码出现了，下面的3个<strong>tab</strong>选项用简单的实现了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    android:layout_width=&quot;match_parent&quot;</span><br><span class="line">    android:layout_height=&quot;match_parent&quot;</span><br><span class="line">    android:background=&quot;#4FC3F3&quot;</span><br><span class="line">    android:orientation=&quot;vertical&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;RelativeLayout</span><br><span class="line">        android:id=&quot;@+id/layout&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;50dp&quot;</span><br><span class="line">        android:layout_alignParentBottom=&quot;true&quot;</span><br><span class="line">        android:background=&quot;#D8D8D8&quot;</span><br><span class="line">        android:orientation=&quot;horizontal&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:layout_width=&quot;50dp&quot;</span><br><span class="line">            android:layout_height=&quot;40dp&quot;</span><br><span class="line">            android:layout_centerVertical=&quot;true&quot;</span><br><span class="line">            android:layout_marginLeft=&quot;15dp&quot;</span><br><span class="line">            android:background=&quot;#9F79EE&quot;</span><br><span class="line">            android:gravity=&quot;center&quot;</span><br><span class="line">            android:text=&quot;智控&quot; /&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:layout_width=&quot;50dp&quot;</span><br><span class="line">            android:layout_height=&quot;40dp&quot;</span><br><span class="line">            android:layout_alignParentRight=&quot;true&quot;</span><br><span class="line">            android:layout_centerVertical=&quot;true&quot;</span><br><span class="line">            android:layout_marginRight=&quot;15dp&quot;</span><br><span class="line">            android:background=&quot;#9F79EE&quot;</span><br><span class="line">            android:gravity=&quot;center&quot;</span><br><span class="line">            android:text=&quot;个人&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/RelativeLayout&gt;</span><br><span class="line"></span><br><span class="line">    &lt;TextView</span><br><span class="line">    	android:id=&quot;@+id/noun_text&quot;</span><br><span class="line">        android:layout_width=&quot;60dp&quot;</span><br><span class="line">        android:layout_height=&quot;60dp&quot;</span><br><span class="line">        android:layout_alignParentBottom=&quot;true&quot;</span><br><span class="line">        android:layout_centerHorizontal=&quot;true&quot;</span><br><span class="line">        android:background=&quot;#FFFFFF&quot;</span><br><span class="line">        android:gravity=&quot;center&quot;</span><br><span class="line">        android:text=&quot;场景&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;/RelativeLayout&gt;</span><br></pre></td></tr></table></figure>
<p>大概的效果就是这样的，只是个初步的布局，毕竟这边是为了演示效果</p>
<p><img src="http://p0sgkjh7x.bkt.clouddn.com/B8E680CD-11EC-4870-9D2B-C5B1F2EDDB7E.png" height="250" width="150"></p>
<p>然后添加中间场景的点击事件，刚也说了想用到<strong>PopupWindow</strong>从底部弹出，然后就开始去实现设计图的效果</p>
<p>下面就是PopupWindow的实现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">private PopupWindow mPopupWindow;</span><br><span class="line">/**</span><br><span class="line"> * PopupWindow的View</span><br><span class="line"> */</span><br><span class="line">private View popView;</span><br><span class="line">/**</span><br><span class="line"> *场景TextView</span><br><span class="line"> */</span><br><span class="line">private TextView nounText;</span><br><span class="line">/**</span><br><span class="line"> *底部Layout</span><br><span class="line"> */</span><br><span class="line">private LinearLayout layout;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">protected void onCreate(@Nullable Bundle savedInstanceState) &#123;</span><br><span class="line">	super.onCreate(savedInstanceState);</span><br><span class="line">	setContentView(R.layout.activity_popup);</span><br><span class="line">	nounText = (TextView) findViewById(R.id.noun_text);</span><br><span class="line">	layout = (LinearLayout) findViewById(R.id.layout);</span><br><span class="line">	popView = LayoutInflater.from(this).inflate(R.layout.popup_layout, null);</span><br><span class="line">	mPopupWindow = new PopupWindow(popView, WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.WRAP_CONTENT);</span><br><span class="line">	mPopupWindow.setOutsideTouchable(true);</span><br><span class="line">	</span><br><span class="line">	nounText.setOnClickListener(v -&gt; &#123;</span><br><span class="line">	    mPopupWindow.showAtLocation(nounText, Gravity.CENTER_HORIZONTAL | Gravity.BOTTOM, 0, layout.getHeight());</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然而想法是美好的，但是现实往往是残酷的…</p>
<p>最后的实现效果却是这样的</p>
<p><img src="http://p0sgkjh7x.bkt.clouddn.com/912830D1-3B7D-4391-BB8C-6829D68213D1.png" height="250" width="150"><strong>对比下这2个图</strong><img src="http://p0sgkjh7x.bkt.clouddn.com/B8E680CD-11EC-4870-9D2B-C5B1F2EDDB7E.png" height="250" width="150"></p>
<p>咋一看是没有问题，但是实际上中间的那个场景选项并没有盖在底部的那个popView上面，当时的想法就是让设计改下(😶，然而就是想想而已)</p>
<p>后来开始思考如果让这个<strong>PopView</strong>在场景的下面，当时有2个思路：</p>
<ul>
<li>1.通过在<strong>PopView</strong>的底部中间加个半圆形衔接下面的场景选项，营造出遮盖的视觉效果</li>
<li>2.因为<strong>PopupWindow</strong>是需要依附在某个组件上的，想能不能再场景的底层在添加个组件(被场景选项遮盖着)，然后让<strong>PopupWindow</strong>去依附这个看不见的组件</li>
</ul>
<p>有了思路就开始动手试试看，然而现实是这2个都不能很好实现要的效果，第一个是因为添加半圆形的时候位置很容易出错，特别是适配的时候，第二个思路的结果发现结果还是跟原来的一样，尽管<strong>PopupWindow</strong>依附的是在场景下的组件，但是效果还是跟依附场景的时候一样😓…</p>
<blockquote>
<p><strong>Why(当时想法只剩下这个了…)</strong></p>
</blockquote>
<p>要想知道原因，我们就要从<strong>PopupWindow</strong>的内部实现方法来分析</p>
<h4 id="PopupWindow内部方法的初步分析"><a href="#PopupWindow内部方法的初步分析" class="headerlink" title="PopupWindow内部方法的初步分析"></a>PopupWindow内部方法的初步分析</h4><blockquote>
<p><strong>PopupWindow</strong>它不是一个<strong>View</strong>或者是<strong>ViewGroup</strong>，所以在使用的时候需要的传入我们的布局View,这边需要注意的是它既不是<strong>View</strong>也不是<strong>ViewGroup</strong>，那么它是什么呢？</p>
</blockquote>
<ul>
<li><strong>PopupWindow</strong>的创建</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">private PopupWindow mPopupWindow;</span><br><span class="line">/**</span><br><span class="line"> * PopupWindow的View</span><br><span class="line"> */</span><br><span class="line">private View popView;</span><br><span class="line">popView = LayoutInflater.from(this).inflate(R.layout.popup_layout, null);</span><br><span class="line">mPopupWindow = new PopupWindow(popView, WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.WRAP_CONTENT);</span><br></pre></td></tr></table></figure>
<p>代码中创建<strong>PopupWindow</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public PopupWindow(View contentView, int width, int height, boolean focusable) &#123;</span><br><span class="line">	/**</span><br><span class="line">	 * 如果contentView不为空，通过contentView获取WindowManager对象</span><br><span class="line">	 * 所以这边我们可以想到了window窗口这个对象，进而popupWindow可能跟window有关，实际上从它的命名也能猜到了</span><br><span class="line">	 */</span><br><span class="line">    if (contentView != null) &#123;</span><br><span class="line">        mContext = contentView.getContext();</span><br><span class="line">        mWindowManager = (WindowManager) mContext.getSystemService(Context.WINDOW_SERVICE);</span><br><span class="line">    &#125;</span><br><span class="line">	//设置contentView</span><br><span class="line">    setContentView(contentView);</span><br><span class="line">    //设置宽度</span><br><span class="line">    setWidth(width);</span><br><span class="line">    //设置高度</span><br><span class="line">    setHeight(height);</span><br><span class="line">    //默认focusable为false</span><br><span class="line">    setFocusable(focusable);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>创建的过程实际上很简单,通过<strong>PopupWindow</strong>的构造方法传入需要的contentView、宽、高就能够得到一个<strong>PopupWindow</strong>对象，但是我们刚也说了它不是<strong>View</strong>也不是<strong>ViewGroup</strong>那它是如何能够显示的呢</p>
<p>在项目使用<strong>PopupWindow</strong>的时候是通过<strong>showAtLocation</strong>方法来设置具体的显示位置的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mPopupWindow.showAtLocation(nounText, Gravity.CENTER_HORIZONTAL | Gravity.BOTTOM, 0, layout.getHeight());</span><br></pre></td></tr></table></figure>
<p><strong>PopupWindow</strong>还有其他的设置显示的方法，这里我们就不具体的说明，但是实际上最后都是需要用到下面这几个方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//获取WindowManager的布局参数</span><br><span class="line">final WindowManager.LayoutParams p = createPopupLayoutParams(anchor.getWindowToken());</span><br><span class="line"></span><br><span class="line">//准备Pop</span><br><span class="line">preparePopup(p);</span><br><span class="line"></span><br><span class="line">//引用Pop</span><br><span class="line">invokePopup(p);</span><br></pre></td></tr></table></figure>
<p>所以我们最需要关注的还是这几个方法的实现过程</p>
<p>返回<strong>Window</strong>的布局参数<strong>WindowManager.LayoutParams</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">private WindowManager.LayoutParams createPopupLayoutParams(IBinder token) &#123;</span><br><span class="line">    final WindowManager.LayoutParams p = new WindowManager.LayoutParams();</span><br><span class="line">	...//这边省略了一些关于设置布局参数p的方法</span><br><span class="line">    return p;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>准备<strong>PopupWindow</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">private void preparePopup(WindowManager.LayoutParams p) &#123;</span><br><span class="line">	 ...</span><br><span class="line">    if (mDecorView != null) &#123;</span><br><span class="line">        mDecorView.cancelTransitions();</span><br><span class="line">    &#125;</span><br><span class="line">    if (mBackground != null) &#123;//如果mBackground不为空即设置了popupWindow的背景图片</span><br><span class="line">        mBackgroundView = createBackgroundView(mContentView);</span><br><span class="line">        mBackgroundView.setBackground(mBackground);</span><br><span class="line">    &#125; else &#123;//如果没有设置背景图片的话，让contentView==背景View</span><br><span class="line">        mBackgroundView = mContentView;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    mDecorView = createDecorView(mBackgroundView);</span><br><span class="line">    mBackgroundView.setElevation(mElevation);</span><br><span class="line">    p.setSurfaceInsets(mBackgroundView, true /*manual*/, true /*preservePrevious*/);</span><br><span class="line">	 ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>引用<strong>PopupWindow</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">private void invokePopup(WindowManager.LayoutParams p) &#123;</span><br><span class="line">    if (mContext != null) &#123;</span><br><span class="line">        p.packageName = mContext.getPackageName();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    final PopupDecorView decorView = mDecorView;</span><br><span class="line">    decorView.setFitsSystemWindows(mLayoutInsetDecor);</span><br><span class="line">    </span><br><span class="line">    setLayoutDirectionFromAnchor();</span><br><span class="line">	//这边通过addView方法添加我们的PopupView</span><br><span class="line">    mWindowManager.addView(decorView, p);</span><br><span class="line"></span><br><span class="line">    if (mEnterTransition != null) &#123;</span><br><span class="line">        decorView.requestEnterTransition(mEnterTransition);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通过<strong>WindowManager</strong>的<strong>addView()</strong>把我们的<strong>PopupDecorView</strong>以及布局的参数P添加到<strong>Window</strong>上</p>
<hr>
<p>未完待续…</p>
<h4 id="PopupWindow延伸问题"><a href="#PopupWindow延伸问题" class="headerlink" title="PopupWindow延伸问题:"></a>PopupWindow延伸问题:</h4><blockquote>
<p>这里会添加一些popupWindow常见的问题，陆续更新中…</p>
</blockquote>
<ul>
<li><p><strong>isShowing失效问题</strong></p>
<p>  在实现popupWindow的过程中，点击按错出现popupWindow，然后再次点击按钮的时候，需要把popupWindow dismiss掉，实现的方法为判断是否显示isShowing，为false才让popupWindow显示</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if (!popupWindow.isShowing()) &#123;</span><br><span class="line">    popupWindow.showAsDropDown(view);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<pre><code>但是发现不管怎么样，**isShowing**一直返回为**false**，所以每次点击按钮popupWindow都会重新显示，断点查看后，发现每次点击出现popupWindow的按钮的时候都会去执行dismiss方法


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 这里一直返回为false</span><br><span class="line"> */</span><br><span class="line">public boolean isShowing() &#123;</span><br><span class="line">       return mIsShowing;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">public void dismiss() &#123;</span><br><span class="line">       if (!isShowing() || isTransitioningToDismiss()) &#123;</span><br><span class="line">           return;</span><br><span class="line">       &#125;</span><br><span class="line">       ...省略</span><br><span class="line">       </span><br><span class="line">       mIsShowing = false;//每次点击都会改变mIsShowing为false</span><br><span class="line">       </span><br><span class="line">       ...省略</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>


然后又发现代码中有这么一句话

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">popupWindowLogin.setOutsideTouchable(true);</span><br></pre></td></tr></table></figure>

这是为了能实现点击popupWindow外部能消失的效果，然后这里突然想到我们点击按钮的时候也属于点击popupWindow外部，所以这里先调用了**dismiss**方法改变了我们的**mIsShowing**的值
知道了具体的原因后，我们发现这里主要是要让按钮的点击变成popupWindow的点击效果，所以我们只要让popupWindow在显示的时候把焦点先抢过来，然后我们点击按钮的时候，实际上就是点击popupWindow，想起来以前焦点问题的时候有这么一句话：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">popupWindowLogin.setFocusable(true);</span><br></pre></td></tr></table></figure>

将焦点设置给popupWindow，然后我们再次点击按钮的时候由于焦点在popupWindow上，所以我们就可以正常的获取**mIsShowing**的值，在来执行我们的判断了。

&gt; 加上代码了试了下效果，果然可行，Nice！
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/03/07/从项目需求到PopupWindow在到Window的过程浅析/" data-id="cjtwrr63v000x5f6sd4szejk8" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-/设计模式/" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/07/设计模式/" class="article-date">
  <time datetime="2018-03-07T12:50:02.585Z" itemprop="datePublished">2018-03-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/07/设计模式/">设计模式</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="设计模式的分类："><a href="#设计模式的分类：" class="headerlink" title="设计模式的分类："></a>设计模式的分类：</h4><ul>
<li>创建型模式：</li>
</ul>
<blockquote>
<p>工厂模式、抽象工厂模式、单例模式、建造者模式、原型模式</p>
</blockquote>
<ul>
<li>结构型模式：</li>
</ul>
<blockquote>
<p>适配器模式、装饰器模式、代理模式、外观模式、桥接模式、组合模式、享元模式</p>
</blockquote>
<ul>
<li>行为型模式：</li>
</ul>
<blockquote>
<p>策略模式、模板方法模式、观察者模式、迭代子模式、责任链模式、命令模式、备忘录模式、状态模式、访问者模式、中介者模式、解释器模式</p>
</blockquote>
<h4 id="设计模式的六大原则："><a href="#设计模式的六大原则：" class="headerlink" title="设计模式的六大原则："></a>设计模式的六大原则：</h4><blockquote>
<p>核心思想还是<strong>高内聚低耦合</strong></p>
</blockquote>
<ul>
<li><p>开闭原则</p>
<blockquote>
<p>对扩展开放，对修改关闭</p>
</blockquote>
</li>
<li><p>里氏代换原则</p>
</li>
</ul>
<blockquote>
</blockquote>
<ul>
<li>依赖倒转原则</li>
<li><p>接口隔离原则</p>
<blockquote>
<p>使用多个隔离的接口，比使用单个接口要好，其实还是要降低耦合性</p>
</blockquote>
</li>
<li><p>迪米特原则(最少知道原则)</p>
<blockquote>
<p>一个类或者接口应该尽量少的和其他类或接口相互知道，使得系统功能模块相对独立</p>
</blockquote>
</li>
<li><p>合成复用原则</p>
<blockquote>
<p>尽量使用合成/聚合的方式，而不是使用继承</p>
</blockquote>
</li>
</ul>
<h5 id="工厂模式"><a href="#工厂模式" class="headerlink" title="工厂模式"></a><strong>工厂模式</strong></h5><p>工厂模式：把对象的创建放到一个工厂类中，通过参数或者是不同的方法来创建不同的对象，缺点在于每添加一个对象，都要去修改原来的工厂。</p>
<ul>
<li>普通工厂模式</li>
</ul>
<blockquote>
<p>建立一个工厂类，对实现了同一接口的一些类进行实例的创建</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class RunFactory &#123;</span><br><span class="line">    </span><br><span class="line">    public RunInterface runType(String type) &#123;</span><br><span class="line">        if (&quot;A&quot;.endsWith(type)) &#123;</span><br><span class="line">            return new ARuning();</span><br><span class="line">        &#125; else if (&quot;B&quot;.endsWith(type)) &#123;</span><br><span class="line">            return new BRuning();</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            return null;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>多个工厂模式</li>
</ul>
<blockquote>
<p>对普通工厂模式的改进，在普通工厂模式中如果传递的参数出错，则不能正确创建对象，而多个工厂模式是提供了多个工厂方法，分别创建对象</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public class RunMoreFactory &#123;</span><br><span class="line">    public RunInterface runA() &#123;</span><br><span class="line">        return new ARuning();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public RunInterface runB() &#123;</span><br><span class="line">        return new BRuning();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>静态工厂模式</li>
</ul>
<blockquote>
<p>对普通工厂模式和多个工厂模式的扩展，在静态工厂中提供静态的工厂方法，不需要创建实例，直接调用就可以</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class RunStaticFactory &#123;</span><br><span class="line"></span><br><span class="line">    public static RunInterface runA() &#123;</span><br><span class="line">        return new ARuning();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static RunInterface runB() &#123;</span><br><span class="line">        return new BRuning();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>好处</li>
</ul>
<blockquote>
<p>工厂模式看上去就是把new封装出来，虽然看上去很简单，但是实际上这恰恰就是通往架构师路上必须要学会的！因为我们要new一个实体对象实际上是一件需要非常谨慎的事情，不要随便的new，最好不要自己去new，让别人去new，传给你去调用。让谁去new，让专门的一个工厂去new。这就是工厂模式！<strong>new 其实是一种硬编码</strong></p>
</blockquote>
<h5 id="抽象工厂"><a href="#抽象工厂" class="headerlink" title="抽象工厂"></a><strong>抽象工厂</strong></h5><p>抽象工厂：创建多个工厂类，每个对象的创建都由专门的一个工厂去创建，一个工厂保存一个new，符合<strong>不改代码</strong>原则</p>
<ul>
<li>需要实现的接口：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public interface FlyInterface &#123;</span><br><span class="line">    void fly();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>专门生产工厂的类：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public interface FlyFactoryProduce &#123;</span><br><span class="line">    FlyInterface produce();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>工厂A：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public class AFlyFactory implements FlyFactoryProduce &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public FlyInterface produce() &#123;</span><br><span class="line">        return new AFly();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>工厂B：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public class BFlyFactory implements FlyFactoryProduce &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public FlyInterface produce() &#123;</span><br><span class="line">        return new BFly();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>A实现：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class AFly implements FlyInterface &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void fly() &#123;</span><br><span class="line">        Log.d(&quot;AFly&quot;, &quot;AFly&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>B实现：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class BFly implements FlyInterface &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void fly() &#123;</span><br><span class="line">        Log.d(&quot;BFly&quot;, &quot;BFly&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>调用：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">FlyInterface AflyInterface = new AFlyFactory().produce();</span><br><span class="line">AflyInterface.fly();</span><br><span class="line"></span><br><span class="line">FlyInterface BflyInterface = new BFlyFactory().produce();</span><br><span class="line">BflyInterface.fly();</span><br></pre></td></tr></table></figure>
<h5 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a><strong>单例模式</strong></h5><p>单例模式：有时候，我们在程序中只需要某个类同时保留一个对象，不希望有更多的对象</p>
<h5 id="特点："><a href="#特点：" class="headerlink" title="特点："></a>特点：</h5><ul>
<li><p>单例模式只能有一个实例</p>
</li>
<li><p>单例类必须创建自己的唯一实例</p>
</li>
<li><p>单例类必须向其他对象提供这一实例</p>
</li>
</ul>
<p>常见的单例模式实现方式：</p>
<ul>
<li>懒汉，线程不安全</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public class SingletonHelper &#123;</span><br><span class="line"></span><br><span class="line">    private static SingletonHelper ourInstance = null;</span><br><span class="line"></span><br><span class="line">    private SingletonHelper() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 懒汉，线程不安全</span><br><span class="line">     *</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public static SingletonHelper getInstance() &#123;</span><br><span class="line">        if (ourInstance == null) &#123;</span><br><span class="line">            ourInstance = new SingletonHelper();</span><br><span class="line">        &#125;</span><br><span class="line">        return ourInstance;</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>缺点在于多线程不能正常工作</p>
<ul>
<li>懒汉，线程安全</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">public class SingletonHelper &#123;</span><br><span class="line"></span><br><span class="line">    private static SingletonHelper ourInstance = null;</span><br><span class="line"></span><br><span class="line">    private SingletonHelper() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 懒汉，线程安全</span><br><span class="line">     *</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public static SingletonHelper getInstance() &#123;</span><br><span class="line">        if (ourInstance == null) &#123;</span><br><span class="line">            synchronized (ourInstance) &#123;</span><br><span class="line">                if (ourInstance == null) &#123;</span><br><span class="line">                    ourInstance = new SingletonHelper();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return ourInstance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这种写法能在多线程中很好的工作，但是实际情况下，需要同步的时候非常少，因此会耗费一定资源</p>
<ul>
<li>饿汉</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class SingletonHelper &#123;</span><br><span class="line"></span><br><span class="line">    private static SingletonHelper inInstance = new SingletonHelper();</span><br><span class="line"></span><br><span class="line">    private SingletonHelper() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static SingletonHelper getInInstance()&#123;</span><br><span class="line">        return inInstance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>缺点一开始就进行实例化，没有能做到lazy-loading</p>
<ul>
<li>饿汉，变种</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public class SingletonHelper &#123;</span><br><span class="line"></span><br><span class="line">    private static SingletonHelper ourInstance = null;</span><br><span class="line">    </span><br><span class="line">    static &#123;</span><br><span class="line">        inInstance = new SingletonHelper();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private SingletonHelper() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static SingletonHelper getInInstance()&#123;</span><br><span class="line">        return inInstance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>实际上跟饿汉没有什么很大区别，都是在类初始化的时候就进行实例化对象</p>
<ul>
<li>静态内部类</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public class SingletonHelper &#123;</span><br><span class="line"></span><br><span class="line">    private static SingletonHelper ourInstance = null;</span><br><span class="line"></span><br><span class="line">    private SingletonHelper() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 静态内部类</span><br><span class="line">     */</span><br><span class="line">    private static class SingletonHolder &#123;</span><br><span class="line">        private static final SingletonHelper SINGLETON_HELPER = new SingletonHelper();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public static final SingletonHelper getOurInstance() &#123;</span><br><span class="line">        return SingletonHolder.SINGLETON_HELPER;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>枚举</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public enum SingleEnumHelper &#123;</span><br><span class="line">    INSTANCE;</span><br><span class="line"></span><br><span class="line">    public void otherMethod() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这种方式是Effective Java作者Josh Bloch 提倡的方式，它不仅能避免多线程同步问题，而且还能防止反序列化重新创建新的对象，但是有个缺点在于枚举的使用</p>
<ul>
<li>双重校验锁</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">public class SingletonHelper &#123;</span><br><span class="line"></span><br><span class="line">    private volatile static SingletonHelper singletonHelper;</span><br><span class="line"></span><br><span class="line">    private SingletonHelper() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 双重加锁</span><br><span class="line">     *</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public static SingletonHelper getSingletonHelper() &#123;</span><br><span class="line">        if (null == singletonHelper) &#123;</span><br><span class="line">            synchronized (SingletonHelper.class) &#123;</span><br><span class="line">                if (null == singletonHelper) &#123;</span><br><span class="line">                    singletonHelper = new SingletonHelper();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return singletonHelper;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>关于单例参考：</p>
<p><a href="http://www.blogjava.net/kenzhh/archive/2016/03/28/357824.html" target="_blank" rel="noopener">Java：单例模式的七种写法</a></p>
<p><a href="https://www.cnblogs.com/cielosun/p/6582333.html" target="_blank" rel="noopener">Java单例模式(Singleton)以及实现</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/03/07/设计模式/" data-id="cjtwrr61p000d5f6sorq1u2nj" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-/2017年年度总结+2018年目标展望/" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/07/2017年年度总结+2018年目标展望/" class="article-date">
  <time datetime="2018-03-07T12:50:02.584Z" itemprop="datePublished">2018-03-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/07/2017年年度总结+2018年目标展望/">2017年年度总结+2018年目标展望</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>2017年转眼也只剩下几天了，想想是该对自己的一年进行个总结了，还有对2018年进行一个延伸。</p>
<p>话说2017年感觉自己过得有点乱，想来最多的原因还是没有一个很好的规划</p>
</blockquote>
<p>2017年的自己可以总结为：<strong>工作</strong>、<strong>技术学习</strong>、<strong>业务学习</strong>、<strong>其他业余学习</strong></p>
<h4 id="工作"><a href="#工作" class="headerlink" title="工作"></a>工作</h4><blockquote>
<p><em>工作是主要的重点，毕竟作为一名公司人，上班才是最重要的一个环节</em></p>
</blockquote>
<ul>
<li><p>经纪通：</p>
<blockquote>
<p>经纪通App是一款经纪人联动软件，支持在线报备客户、跟踪客户进度，坚持三天结佣、七天到账，让天下没有难卖的房</p>
</blockquote>
<p>  未公开内容…</p>
</li>
<li><p>筑家易：</p>
<blockquote>
<p>筑家易App提供全新的购房体验，充分考虑到投资、自住、置换以及家装家居等需求，致力构建从房到家的移动互联网的产业链平台</p>
</blockquote>
<p>  未公开内容…</p>
</li>
<li><p>中策通：</p>
<blockquote>
<p>中策通App是基于经纪通延伸出来的提供给第三方使用的产品</p>
</blockquote>
<p>  未公开内容…</p>
</li>
<li><p>经纪通重构：</p>
<blockquote>
<p>主要是重构老版经纪通的代码，原有的项目代码结构混乱，耦合性太高</p>
</blockquote>
<p>  未公开内容…</p>
</li>
<li><p>楼掌柜分销：</p>
<blockquote>
<p>楼掌柜分销是房产分销App，提供房产信息联动自由经纪人和企业用户，包括佣金结佣、房贷计算器、客户报备等</p>
</blockquote>
<p>  未公开内容…</p>
</li>
</ul>
<h5 id="工作总结："><a href="#工作总结：" class="headerlink" title="工作总结："></a>工作总结：</h5><p>17年中主要是负责了5个App的功能迭代和产品优化，整个开发过程中尽管磕磕碰碰遇到了不同的问题，但是总体上来说还是朝着一个向上的趋势不断的进行着，而且最重要的是在问题中成长，一个问题的产生往往代表着自己某块知识点的缺失，解决问题的过程就是补充知识的过程，所以说整个17年工作中还是收获很大。</p>
<h4 id="技术学习"><a href="#技术学习" class="headerlink" title="技术学习"></a>技术学习</h4><blockquote>
<p><em>作为一名软件开发人员(码农)，不断学习是必须的，不管是为了更好的工作还是更进一步的成长,下面是17年学习的语言，有些是有了初步的接入项目中使用，有些还是停留在学习中</em></p>
</blockquote>
<ul>
<li><p>Kotlin</p>
<blockquote>
<p>Kotlin是一个基于JVM的新的编程语言，由JetBrains开发，已正式成为Android官方支持开发语言。</p>
<ul>
<li>楼掌柜分销App中用Kotlin语言开发</li>
<li>其他项目中简单的页面初步使用Kotlin进行开发</li>
</ul>
</blockquote>
</li>
<li><p>RxJava+RxAndroid</p>
<blockquote>
<p>实现异步操作的库</p>
<ul>
<li>筑家易App利用RxJava+RxAndroid封装网络请求框架</li>
</ul>
</blockquote>
</li>
<li><p>Python</p>
<blockquote>
<p>大数据、机器学习的兴起，导致Python语言一度成为热门，而且Python入门简单、易读、易维护的风格更加受到开发者的欢迎和使用</p>
<ul>
<li>利用Python获取最近天气情况</li>
<li>利用Python实现从网络获取图片并保存到本地</li>
</ul>
</blockquote>
</li>
<li><p>R语言</p>
<blockquote>
<p>R 用于统计分析、绘图的语言和操作环境，R是属于GNU系统的一个自由、免费、源代码开放的软件，它是一个用于统计计算和统计制图的优秀工具</p>
<ul>
<li>目前正处于学习中，后期可以使用R进行数据的统计分析</li>
</ul>
</blockquote>
</li>
<li><p>React Native</p>
<blockquote>
<p>Facebook推出的跨平台移动应用开发框架，使用Jsx、Css来开发移动应用支持iOS和Android。</p>
<ul>
<li>目前关于React Native还停留在学习的阶段，后续学习更多后会在项目中接入使用</li>
</ul>
</blockquote>
</li>
<li><p>Groovy</p>
<blockquote>
<p>Groovy是一种基于JVM(Java虚拟机)的敏捷开发语言，它结合了Python、Ruby和Smalltalk的许多强大的特性,能够和Java代码很好的结合。</p>
<ul>
<li>build.gradle中的多渠道打包</li>
<li>apk批量上传</li>
</ul>
</blockquote>
</li>
<li><p>利用Git+Jekyll搭建个人博客</p>
<blockquote>
<p>写个人博客不仅仅是展示自我的时候，更是反问自己和提高自己的机会</p>
<ul>
<li>通过git+jekyll初步搭建</li>
<li>使用jekyll的theme来使得博客更加人性化</li>
<li>陆陆续续维护个人博客20多篇</li>
</ul>
</blockquote>
</li>
</ul>
<h5 id="技术学习总结"><a href="#技术学习总结" class="headerlink" title="技术学习总结"></a>技术学习总结</h5><p>17年接触了很多的新技术，一些是新的语言，一些是项目中可以用到的新技术，在使用新技术的过程中发现了很多的问题，通过资料和文档一个个都解决了，解决的过程更是对新技术的进一步学习，总体来说新技术的学习才是避免自己不被淘汰的原因</p>
<h4 id="业务学习"><a href="#业务学习" class="headerlink" title="业务学习"></a>业务学习</h4><blockquote>
<p><em>励志成为全栈，不能只会技术，业务方面也要去学习和了解</em></p>
</blockquote>
<ul>
<li><p>新房产业务</p>
<blockquote>
<p>新房产业务既从线下转到线上在到线上转到线下最后是线上线下，形成一个闭环，基于移动互联网和大数据给房产服务形成一个完整的体系结构，原有的线下销售转到线上进行，线上的虚拟服务在到线下的真实服务最后到线上线下的的结合服务</p>
</blockquote>
</li>
<li><p>CRM业务</p>
<blockquote>
<p>CRM,既客户关系管理系统，是企业为提高核心竞争力，利用相应的信息技术以及互联网技术来协调企业与顾客之间在销售、营销和服务上的交互，从而提升其管理方式，向客户提高创新式的个性化的客户交互和服务的过程</p>
</blockquote>
</li>
</ul>
<h5 id="业务学习总结"><a href="#业务学习总结" class="headerlink" title="业务学习总结"></a>业务学习总结</h5><p>一个开发不能只满足与自己的代码，要去兼顾业务方面的学，而且更重要的是要去学习业务的流程这样才能更好的开发出稳定、优秀的产品。最主要的是了解业务后能对自己的产品产生更多的情感，能对产品开发投入更多的精力，所以说一个开发学习业务是一个很重要的环节</p>
<h4 id="其他业余学习"><a href="#其他业余学习" class="headerlink" title="其他业余学习"></a>其他业余学习</h4><blockquote>
<p><em>面对日涨愈高的房价，单靠工资想买得起房子真的很难</em></p>
</blockquote>
<ul>
<li><p>理财</p>
<blockquote>
<p>理财包括：基金、股票、黄金、买房、p2p等</p>
</blockquote>
<ul>
<li>基金</li>
<li>股票</li>
<li>黄金</li>
<li>买房</li>
<li>p2p</li>
</ul>
</li>
<li><p>新媒体</p>
<blockquote>
<p>新媒体作为一种新的媒体形态，是相对于报刊、广播、电视等传统媒体以后发展起来的，通过互联网、无线通信网、有限网等渠道以及电脑、手机、数字电视剧等终端，向用户提供信息和娱乐的传播形态和媒体形态。</p>
<ul>
<li>个人公众号</li>
<li>个人博客</li>
</ul>
</blockquote>
</li>
</ul>
<h5 id="业余学习总结"><a href="#业余学习总结" class="headerlink" title="业余学习总结"></a>业余学习总结</h5><p>业余学习一方面是为了提高自己的生活质量，一方面是为了扩充自己的知识面</p>
<hr>
<h3 id="2018年规划"><a href="#2018年规划" class="headerlink" title="2018年规划"></a>2018年规划</h3><p>2018年目标会在17年总结的基础上进一步的延伸</p>
<h4 id="工作-1"><a href="#工作-1" class="headerlink" title="工作"></a>工作</h4><blockquote>
<p>从目前的中级开发向高级开发迈进，以及向更高的专家级展望</p>
</blockquote>
<ul>
<li>解耦原来的项目代码</li>
<li>完成项目功能的迭代和优化</li>
<li>优化项目、提高稳定性、减少内存泄露、减少apk大小</li>
<li>项目中添加热修复，使用热更新提高用户体验</li>
<li>组件开发+模块开发+插件化开发等开发模式的引入和使用</li>
<li>敏捷开发+单元测试</li>
</ul>
<h4 id="技术学习-1"><a href="#技术学习-1" class="headerlink" title="技术学习"></a>技术学习</h4><blockquote>
<p>不断完善自己的技术学习栈</p>
</blockquote>
<ul>
<li>数据结构和算法</li>
<li>Html5+JavaScript+Css</li>
<li>Php</li>
<li>Java后台</li>
<li>Linux</li>
</ul>
<h4 id="业务学习-1"><a href="#业务学习-1" class="headerlink" title="业务学习"></a>业务学习</h4><blockquote>
<p>业务学习是体现自己和其他开发人员的优势区别之一</p>
</blockquote>
<ul>
<li>产品理念</li>
<li>用户体验</li>
<li>线上线下</li>
</ul>
<h4 id="其他业余学习-1"><a href="#其他业余学习-1" class="headerlink" title="其他业余学习"></a>其他业余学习</h4><blockquote>
<p>业余学习是为了更好的满足自己的生活</p>
</blockquote>
<ul>
<li>ps</li>
<li>设计</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/03/07/2017年年度总结+2018年目标展望/" data-id="cjtwrr61i000b5f6s95d3t2fd" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/03/29/5.1节日旅游攻略/">5.1节日旅游攻略</a>
          </li>
        
          <li>
            <a href="/2018/03/07/各大商店应用图标、截图尺寸/">各大商店应用图标、截图尺寸</a>
          </li>
        
          <li>
            <a href="/2018/03/07/Android9.0曝光新特性/">Android9.0曝光新特性</a>
          </li>
        
          <li>
            <a href="/2018/03/07/TensorFlow入门/">TensorFlow入门</a>
          </li>
        
          <li>
            <a href="/2018/03/07/Android仓库托管平台/">Android仓库托管平台</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>